<script>
  $(document).ready(function() {
     $('#uploadForm').submit(function() {
        $("#status").empty().text("File is uploading...");
        $(this).ajaxSubmit({
            error: function(xhr) {
        	status('Error: ' + xhr.status);
            },
            success: function(response) {
        $("#status").empty().text(response);
                console.log(response);
            }
    });
        //Very important line, it disable the page refresh.
    return false;
    });    
});
</script>


<h1>Profile</h1>
{{errorMessage}}


<!-- All Categories{{allCategories.length}}
<div id="allCategories" droppable drop="handleDropInAllCategory" style="width:200px;height:200px;border:1px black solid;">

<span ng-repeat="category in allCategories" id="{{category}}"  draggable>{{category.name}}</span>

</div>
user Categories{{userCategories.length}}
<div id="userCategories" droppable drop="handleDropInUserCategory" style="width:200px;height:200px;border:1px black solid;">

<span ng-repeat="category in userCategories" id="{{category}}"  draggable>{{category.name}}</span>
</div> -->


name:   <input type="text" ng-model="userDetails.name" ng-disabled="true"/>      
</br>
work phone: <input type="text" ng-model="userDetails.workPhone" ng-disabled="!editProfile"/>  
</br>
location:  <select ng-options="location._id as location.name for location in locations" ng-model="userDetails.location" ng-disabled="!editProfile"></select> 
</br>
empId: <input type="text" ng-model="userDetails.empId" ng-disabled="!editProfile" /> 
</br>
 <form id="uploadForm"
         enctype="multipart/form-data"
         action="/profile/upload"
         method="post">
      <input type="file" name="userPhoto" />
      <input type="submit" value="Upload Image" name="submit">
      <span id = "status"></span>
    </form>
</br>
categories:
<span ng-repeat="category in allCategories" ><input  id="{{category.name}}" type="checkbox" value="{{category}}" ng-disabled="!editProfile" ng-checked="checkCategory(category._id);" ng-click="toggleSelection(category)"/><label for="{{category.name}}">{{category.name}} </label></span>

<input type="button" value="Edit" ng-click="edit();" ng-show="!editProfile"/>
<input type="button" value="update" ng-click="updateProfile();" ng-show="editProfile"/>

</br>
<!-- <form method="post" enctype="multipart/form-data" action="/profile/file-upload">
 
    <input type="file" name="thumbnail">
    <input type="submit">
</form> -->