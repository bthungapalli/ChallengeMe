<script>
  $(document).ready(function() {
	  
	  $(":file").jfilestyle({placeholder: "",buttonText: "Profile",'inputSize': '62%'});
	  
		  $('#uploadForm').submit(function() {
		        $(this).ajaxSubmit({
		            error: function(xhr) {
		        	status('Error: ' + xhr.status);
		            },
		            success: function(response) {
		                console.log(response);
		                 $(profileImage).attr('src', profileImage + '?' + new Date().getTime());
		            }
		    });
		        //Very important line, it disable the page refresh.
		    return false;
		    }); 
      
});
</script>

{{errorMessage}}


<div class="ui stackable grid">

		<div class="three wide center aligned column">
		<div class="ui segment" id="profileImage">
 			 <img  class="ui centered medium image" src="{{imagePath}}">
 			<!--  <img ng-if="imagePath.length===0" class="ui centered medium image" src="images/default.png"> -->
 		</div>
		
	<div id="upload">	<form id="uploadForm"
	         enctype="multipart/form-data"
	         action="/profile/upload"
	         method="post"
	         ng-controller="profileController">
	     <input type="file" class="jfilestyle" data-placeholder="My place holder" name=userPhoto>
	      <button type="submit" class="ui tiny yellow button">
		  	<i class="upload icon"></i> Upload
		</button>
	    </form>
		</div>
 		
		</div>
		
		<div class="thirteen wide column">
		
		<div class="ui grid">
		
					<div class="three wide column">
					Name
					</div>
					<div  class="thirteen wide column">
					 <div class="ui input focus">
				     <input type="text" ng-model="userDetails.name" ng-disabled="true"/> 
				     </div>
					</div>
					<div class="three wide column">
					Work phone
					</div>
					<div  class="thirteen wide column">
					<div class="ui input focus">
					 <input type="text" ng-model="userDetails.workPhone" ng-disabled="!editProfile"/>   
					 </div>
					</div>
					<div class="three wide column">
					Location
					</div>
					<div  class="thirteen wide column">
					  <select class="ui dropdown"  ng-options="location._id as location.name for location in locations" ng-model="userDetails.location" ng-disabled="!editProfile"></select>  
					</div>
					<div class="three wide column">
					Employee Id
					</div>
					<div  class="thirteen wide column">
					<div class="ui input focus">
					  <input type="text" ng-model="userDetails.empId" ng-disabled="!editProfile" /> 
					  </div>
					</div>
					<div class="three wide column">
					Categories
					</div>
					<div  class="thirteen wide column">
					 <span ng-repeat="category in allCategories" >
					 
					 <div class="ui toggle checkbox">
					  <input id="{{category.name}}" type="checkbox" value="{{category}}" ng-disabled="!editProfile" ng-checked="checkCategory(category._id);" ng-click="toggleSelection(category)"/>
					  <label for="{{category.name}}" style="padding-left: 54px;padding-right: 20px;">{{category.name | camelCase}} </label>
					</div>
					 
					 </span>
					</div>
					<div class="sixteen wide center aligned column">
						<button class="ui primary button" ng-click="edit();" ng-show="!editProfile">
					  	<i class="write icon"></i>Edit
						</button>
						<button class="ui positive button" ng-click="updateProfile();" ng-show="editProfile">
					  	<i class="checkmark icon"></i> Update
						</button>
					</div>
		
		</div>
		
		</div>
		

</div>

